#!/usr/bin/env python

import re

function_re = re.compile('^\[pid \d+\] (.*?)\(.*$')
LTRACE_IGNORE = [
	re.compile('^\[pid \d+\] --- .*'),
	re.compile('^\[pid \d+\] \+\+\+ .*'),
	re.compile('^\[pid \d+\] __.*'),
	re.compile('^\[pid \d+\] <\.\.\. .*'),
	re.compile('^$')
]

functions = set()
ltrace = open('ltracelibvirtd.out', 'r')
for line in ltrace:
	#print line
	for expression in LTRACE_IGNORE:
		if expression.match(line): break
	else:
		candidate = function_re.match(line)
		if candidate: functions.add(candidate.group(1))
ltrace.close()
for function in sorted(functions):
	print function
