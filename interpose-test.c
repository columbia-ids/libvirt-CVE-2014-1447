#define _GNU_SOURCE
#define GNULIB_NAMESPACE
#define HAVE_GETUID
#define HAVE_GETEUID
#define HAVE_GETGID
#define HAVE_PTHREAD_MUTEXATTR_INIT
#include <dlfcn.h>
#include <unistd.h>
#include <sys/types.h>
#include <stdbool.h>
#include "/usr/include/time.h"
#include <pthread.h>
#include <dirent.h>
#include <stdio.h>
#include <wchar.h>
#include <libintl.h>

void *memset(void * s, int c, size_t n)
{
	static void * (*real_memset)(void *, int, size_t) = NULL;
	int i;
	for(i=0; i<21; i++)
		asm("nop;");
	if(!real_memset)
		real_memset = dlsym(RTLD_NEXT, "memset");
	return real_memset(s, c, n);
}

size_t strlen(const char * s)
{
	static size_t (*real_strlen)(const char *) = NULL;
	int i;
	for(i=0; i<0; i++)
		asm("nop;");
	if(!real_strlen)
		real_strlen = dlsym(RTLD_NEXT, "strlen");
	return real_strlen(s);
}

size_t strnlen(const char * s, size_t maxsize)
{
	static size_t (*real_strnlen)(const char *, size_t) = NULL;
	int i;
	for(i=0; i<50; i++)
		asm("nop;");
	if(!real_strnlen)
		real_strnlen = dlsym(RTLD_NEXT, "strnlen");
	return real_strnlen(s, maxsize);
}

int wctob(wint_t c)
{
	static int (*real_wctob)(wint_t) = NULL;
	int i;
	for(i=0; i<23; i++)
		asm("nop;");
	if(!real_wctob)
		real_wctob = dlsym(RTLD_NEXT, "wctob");
	return real_wctob(c);
}

size_t mbrtowc(wchar_t * pwc, const char * s, size_t n, mbstate_t * ps)
{
	static size_t (*real_mbrtowc)(wchar_t *, const char *, size_t, mbstate_t *) = NULL;
	int i;
	for(i=0; i<2; i++)
		asm("nop;");
	if(!real_mbrtowc)
		real_mbrtowc = dlsym(RTLD_NEXT, "mbrtowc");
	return real_mbrtowc(pwc, s, n, ps);
}

size_t wcrtomb(char * s, wchar_t wc, mbstate_t * ps)
{
	static size_t (*real_wcrtomb)(char *, wchar_t, mbstate_t *) = NULL;
	int i;
	for(i=0; i<3; i++)
		asm("nop;");
	if(!real_wcrtomb)
		real_wcrtomb = dlsym(RTLD_NEXT, "wcrtomb");
	return real_wcrtomb(s, wc, ps);
}
